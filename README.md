**# 요약**
- 최종 학습 모델 : TCN, TRANSFORMER
- 최대 RAM 24GB 이하 구동하도록 모델 축약 필요(지표 분석 xgboost 제외)
- 예측을 위해 5 ~ 6개월 데이터 필요
- 모델 예측 확률 기반 시간 분석 1 : KST(02:30 ~ 04:30, 07:00 ~ 08:00)
- 모델 예측 확률 기반 시간 분석 2 : KST(13:30 ~ 15:00, 17:30 ~ 21:00)
- 기준 시점에서 60분 이내에 1.1% 이상 상승하는 경우가 3% 미만 발생
  => 시간을 180분으로 증가, 수익 1.1% 이상, 매매 횟수 유지
  => 시간을 60분으로 유지, 수익 0.6% 이상, 매매 횟수 유지
  => 시간을 60분으로 유지, 수익 0.6% 이상, 매매 횟수 2배 증가


**# 목적과 도구**
1. 목적
- 특정 상품에 특화된 모델 제작
- 특정 상품의 레버리지 진입으로 수익 실현(20x, 1%, 1.1%)
- 전략 시간 파악
- 전략 지표 파악

2. 테스트 모델
- TCN(단일 학습)
- Transformer(추가 학습)

3. 테스트 도구
- Colab TPU
- Kaggle TPU
- ChatGPT 4o


**# 기본 태스트**
1. 학습 과정
- Transformer  => SOL 1분 봉 데이터 수집의 1/3 씩 추가 학습
- TCN  => SOL 1분 봉 데이터 일괄 학습

2. 기본 테스트 결과
![image](https://github.com/user-attachments/assets/a755dfc5-c0e4-421b-8c8e-09b6576c5feb)

3. 기본 테스트 분석
- 시계열 기반 신경망 모델 선택(TCN, TRANSFORMER)
- 과거 변동성이 너무 심하여 모델 성능 왜곡이 심해질 수 있음.
- 지표가 복합하여 메모리 소모 심함(TPU 4년 치 시계열 학습 시 300GB 소모)


**# 기간 태스트**
1. 학습 과정
- SOL 1분 봉 데이터 수집의 1/3, 2/3, 3/3을 테스트
- SOL 1분 봉 데이터 추가 수집의 1/12, 1/6, 1/4, 1/2, 1/1을 테스트
- 5, 6, 7 개월 데이터를 묶고 각 지점에서 예측 테스트 

2. 기간 테스트 결과
![image](https://github.com/user-attachments/assets/88968149-4c5e-452f-b29d-07ec20e2dc9f

![image](https://github.com/user-attachments/assets/0685530a-a426-414c-8390-6784c018322c)

3. 기간 테스트 분석
- 5 ~ 6개월 데이터 필요
- xgboost를 통한 관계성 높은 항목 20개 선택 모델에 대하여 => 성능 하락으로 다른 방법 필요 => TCN_v5 버전


**# 시간대 테스트**
1. 테스트 과정
- 날짜를 제거하고 시간만 활용하여 묶음
- 시간별 1.1% 이상 상승 하는 구간을 시각화
- 시각화 기반 1.1% 이상 상승하는 확률이 높은 구간을 선택

2. 테스트 결과1(단순 1.1% 이상 발생 시간대 분석)
![image](https://github.com/user-attachments/assets/c7a3e31d-c7f0-4778-b769-da1afa986504)

![image](https://github.com/user-attachments/assets/70d7cb67-a0f1-44f5-b6cb-1d97b8331187)

4. 테스트 결과2(단순 1.1% 이상 발생하는 요일 비중
![image](https://github.com/user-attachments/assets/c8c67305-3394-41d0-b09a-507e6ac9bf40)

5. 테스트 결과3(단순 1.1% 이상 발생하는 최대 하락)
![image](https://github.com/user-attachments/assets/57fdfa98-7c50-46aa-9331-49fce321c882)

6. 테스트 결과4(Transformer_v3 모델 예측 결과에 대해, 30분 간격으로, 예측 성공 비중)
![image](https://github.com/user-attachments/assets/ca898980-27a8-4d99-a5da-0d1f5b84ad09)

7. 테스트 결과 분석
- 전체적으로 시간대별 50% 이상과 같은 높은 확률 구간은 존재하지 않으나 시간대 존재
- 1.1% 이상 발생 확률 높은 구간이 하락률 낮음
- 영업일이 확률 높음
- 1.1% 이상이 많이 발생하는 구간과 모델의 예측 확률이 높은 시간은 크게 상관없음.
- 오히려 1.1% 이상이 적게 발생하는 구간이 확률적으로 높음

**# 최적 구간 테스트**
1. 데이터
- 학습 1분 봉 및 3분 봉(2021-07-27 ~ 2024-07-27 데이터를 3 등분한 것의 중간 부분 사용)
- 테스트 1분 봉 및 3분 봉( 2023-07-27 ~ 2024-07-27)

2. 모델 학습
- TCN 기본값을 활용하여 시계열 처리 후 학습
- 학습된 모델에 테스트 데이터 확인
- 최종 결괏값은 각 구간에서 예측 후 가장 최신 날짜의 예측 결과만 활용
- 구간은 1개월 ~ 7개월까지

3. 테스트 결과
![image](https://github.com/user-attachments/assets/13e280e3-534a-475c-b919-0767c6adc10c)

4. 결과 분석
- 1분 봉 데이터가 유의미한 결과를 발생
- 1분 봉 기준 30봉 이내에서 0.7% 0.9% 분류 및 발생 빈도가 높음 (87% ~ 90%)
- 1분 봉 기준 30봉 이내에 데이터 구간 3개월 ~ 6개월 확률 높음(87% ~ 90%)
- 1분 봉 기준 60봉 이내에 0.9% ~ 1.3% 분류 및 발생 빈도가 높음(74% ~ 76%)
- 1분 봉 기준 60봉 이내에 2개월 ~ 3개월, 5개월 ~ 6개월 확률 높음(74% ~ 76%)
- 3분 봉 기준 30봉 이내에 0.9%, 1.3%, 1.5% 및 1개월 ~ 3개월 확률 높음(67% 이상)

5. 결과분석2

- 확률 80이상
![image](https://github.com/user-attachments/assets/1b9e4d4b-fb0c-42cd-a9f3-3f6faec42efb)

- 확률 70 이상
![image](https://github.com/user-attachments/assets/f3b08c9f-6337-4bbd-8de3-7dd59d881b41)

- 확률 65 이상
![image](https://github.com/user-attachments/assets/10c93731-e0e9-4b22-8adb-d37ed64fd930)

